# Strava Running Sync - WordPress æ’ä»¶

ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„WordPressæ’ä»¶ï¼Œå¯ä»¥è‡ªåŠ¨åŒæ­¥Stravaè·‘æ­¥æ•°æ®å¹¶åœ¨ç½‘ç«™ä¸Šè¿›è¡Œå¯è§†åŒ–å±•ç¤ºã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸƒâ€â™€ï¸ **å¤šè¿åŠ¨æ”¯æŒ** - è‡ªåŠ¨åŒæ­¥è·‘æ­¥ã€æ­¥è¡Œã€éª‘è¡Œç­‰è¿åŠ¨æ•°æ®
- ğŸ“Š **ç»Ÿè®¡å±•ç¤º** - æ˜¾ç¤ºæ€»è·ç¦»ã€æ€»æ—¶é•¿ã€å¹³å‡é…é€Ÿç­‰ç»Ÿè®¡ä¿¡æ¯
- ğŸ—ºï¸ **åœ°å›¾å¯è§†åŒ–** - åœ¨äº¤äº’å¼åœ°å›¾ä¸Šå±•ç¤ºè¿åŠ¨è½¨è¿¹
- ğŸ“‹ **æ•°æ®è¡¨æ ¼** - ä»¥è¡¨æ ¼å½¢å¼å±•ç¤ºè¯¦ç»†çš„æ´»åŠ¨åˆ—è¡¨
- ğŸ¯ **ç±»å‹ç­›é€‰** - æ”¯æŒæŒ‰è¿åŠ¨ç±»å‹ç­›é€‰æ•°æ®
- ğŸ”„ **å®šæ—¶åŒæ­¥** - æ”¯æŒæ¯å°æ—¶è‡ªåŠ¨åŒæ­¥æœ€æ–°æ•°æ®

## å®‰è£…ä¸é…ç½®

### 1. åˆ›å»ºStravaåº”ç”¨

1. è®¿é—® [Strava APIè®¾ç½®é¡µé¢](https://www.strava.com/settings/api)
2. ç‚¹å‡»"Create App"åˆ›å»ºæ–°åº”ç”¨
3. å¡«å†™åº”ç”¨ä¿¡æ¯ï¼š
   - Application Name: ä½ çš„åº”ç”¨åç§°
   - Category: é€‰æ‹©é€‚å½“çš„åˆ†ç±»
   - Club: å¯ç•™ç©º
   - Website: ä½ çš„ç½‘ç«™åœ°å€
   - Authorization Callback Domain: ä½ çš„åŸŸåï¼ˆå¦‚ï¼šexample.comï¼‰
   - **é‡è¦**ï¼šAuthorization Callback Domain åªå¡«å†™åŸŸåï¼Œä¸è¦åŒ…å«åè®®å’Œè·¯å¾„
4. ä¿å­˜Client IDå’ŒClient Secret

**å›è°ƒURLé…ç½®è¯´æ˜ï¼š**
- Stravaçš„Authorization Callback Domainåªéœ€è¦å¡«å†™åŸŸåï¼ˆå¦‚ï¼š`example.com`ï¼‰
- å®Œæ•´çš„å›è°ƒURLä¼šæ˜¯ï¼š`https://example.com/wp-admin/admin.php?page=strava-running-sync&action=callback`
- å¦‚æœä½ çš„WordPresså®‰è£…åœ¨å­ç›®å½•æˆ–ä½¿ç”¨è‡ªå®šä¹‰åŸŸåï¼Œå¯ä»¥åœ¨æ’ä»¶è®¾ç½®ä¸­ä¿®æ”¹å›è°ƒURL

### 2. å®‰è£…æ’ä»¶

1. å°†æ’ä»¶æ–‡ä»¶å¤¹ä¸Šä¼ åˆ° `/wp-content/plugins/` ç›®å½•
2. åœ¨WordPressåå°æ¿€æ´»æ’ä»¶

### 3. é…ç½®æ’ä»¶

1. åœ¨WordPressåå°è¿›å…¥"Strava Running"è®¾ç½®é¡µé¢
2. å¡«å…¥ä»Stravaè·å–çš„Client IDå’ŒClient Secret
3. ç‚¹å‡»"è¿æ¥åˆ°Strava"æŒ‰é’®å®ŒæˆOAuthæˆæƒ
4. é…ç½®æ˜¾ç¤ºé€‰é¡¹ï¼ˆåœ°å›¾æ ·å¼ã€è‡ªåŠ¨åŒæ­¥ç­‰ï¼‰
5. ç‚¹å‡»"ç«‹å³åŒæ­¥"è¿›è¡Œé¦–æ¬¡æ•°æ®åŒæ­¥

## ä½¿ç”¨æ–¹æ³•

### çŸ­ä»£ç å‚æ•°

ä½¿ç”¨ `[strava_running_display]` çŸ­ä»£ç åœ¨é¡µé¢æˆ–æ–‡ç« ä¸­æ˜¾ç¤ºè·‘æ­¥æ•°æ®ã€‚

æ”¯æŒçš„å‚æ•°ï¼š

- `type` - æ˜¾ç¤ºç±»å‹
  - `both` - åŒæ—¶æ˜¾ç¤ºç»Ÿè®¡ã€åœ°å›¾å’Œè¡¨æ ¼ï¼ˆé»˜è®¤ï¼‰
  - `stats` - ä»…æ˜¾ç¤ºç»Ÿè®¡ä¿¡æ¯
  - `map` - ä»…æ˜¾ç¤ºåœ°å›¾
  - `table` - ä»…æ˜¾ç¤ºæ•°æ®è¡¨æ ¼
- `limit` - æ˜¾ç¤ºçš„æ´»åŠ¨æ•°é‡ï¼ˆé»˜è®¤50ï¼‰
- `map_height` - åœ°å›¾é«˜åº¦ï¼ˆé»˜è®¤500pxï¼‰

### ç¤ºä¾‹

```
<!-- æ˜¾ç¤ºæ‰€æœ‰å†…å®¹ -->
[strava_running_display]

<!-- ä»…æ˜¾ç¤ºåœ°å›¾ï¼Œé«˜åº¦600px -->
[strava_running_display type="map" map_height="600px"]

<!-- æ˜¾ç¤ºç»Ÿè®¡å’Œè¡¨æ ¼ï¼Œé™åˆ¶20ä¸ªæ´»åŠ¨ -->
[strava_running_display type="both" limit="20"]

<!-- ä»…æ˜¾ç¤ºç»Ÿè®¡ä¿¡æ¯ -->
[strava_running_display type="stats"]
```

## æ•°æ®åº“ç»“æ„

æ’ä»¶ä¼šåˆ›å»ºä¸¤ä¸ªæ•°æ®è¡¨ï¼š

1. `wp_srs_activities` - å­˜å‚¨æ´»åŠ¨åŸºæœ¬ä¿¡æ¯
2. `wp_srs_streams` - å­˜å‚¨æ´»åŠ¨è½¨è¿¹æ•°æ®

## æŠ€æœ¯ç‰¹æ€§

- **å“åº”å¼è®¾è®¡** - é€‚é…ç§»åŠ¨è®¾å¤‡
- **äº¤äº’å¼åœ°å›¾** - ä½¿ç”¨Leaflet.jsæ˜¾ç¤ºè·¯çº¿
- **æ•°æ®å®‰å…¨** - æ”¯æŒOAuth 2.0è®¤è¯
- **æ€§èƒ½ä¼˜åŒ–** - æ•°æ®ç¼“å­˜å’Œåˆ†é¡µåŠ è½½
- **å¤šè¯­è¨€æ”¯æŒ** - æ”¯æŒä¸­è‹±æ–‡ç•Œé¢
- **æç®€ç¾å­¦** - å—iA Writerå¯å‘çš„æ— æ¡†çº¿è®¾è®¡

## è‡ªå®šä¹‰æ ·å¼

å¯ä»¥é€šè¿‡CSSè‡ªå®šä¹‰æ’ä»¶çš„å¤–è§‚ï¼Œä¸»è¦çš„CSSç±»åï¼š

- `.srs-container` - ä¸»å®¹å™¨
- `.srs-statistics` - ç»Ÿè®¡åŒºåŸŸ  
- `.srs-map-section` - åœ°å›¾åŒºåŸŸ
- `.srs-activities-section` - æ´»åŠ¨åˆ—è¡¨åŒºåŸŸ
- `.srs-table` - è¡¨æ ¼æ ·å¼
- `.srs-activity-filter` - ç±»å‹ç­›é€‰æŒ‰é’®

## å¸¸è§é—®é¢˜

### OAuthè®¤è¯é”™è¯¯

å¦‚æœé‡åˆ° `Bad Request` æˆ– `invalid redirect_uri` é”™è¯¯ï¼š

1. **æ£€æŸ¥å›è°ƒåŸŸåé…ç½®**ï¼š
   - ç¡®ä¿Stravaåº”ç”¨è®¾ç½®ä¸­çš„"Authorization Callback Domain"åªåŒ…å«åŸŸå
   - ä¾‹å¦‚ï¼šå¡«å†™`example.com`è€Œä¸æ˜¯`https://example.com/wp-admin/...`

2. **è‡ªå®šä¹‰å›è°ƒURL**ï¼š
   - åœ¨æ’ä»¶è®¾ç½®é¡µé¢çš„"å›è°ƒURL"å­—æ®µä¸­è¾“å…¥å®Œæ•´çš„å›è°ƒåœ°å€
   - ç¡®ä¿åŸŸåä¸Stravaåº”ç”¨è®¾ç½®ä¸€è‡´

3. **å¸¸è§å›è°ƒURLç¤ºä¾‹**ï¼š
   ```
   ä¸»åŸŸåå®‰è£…ï¼šhttps://example.com/wp-admin/admin.php?page=strava-running-sync&action=callback
   å­ç›®å½•å®‰è£…ï¼šhttps://example.com/blog/wp-admin/admin.php?page=strava-running-sync&action=callback
   å­åŸŸåå®‰è£…ï¼šhttps://blog.example.com/wp-admin/admin.php?page=strava-running-sync&action=callback
   ```

## æŠ€æœ¯æ”¯æŒ

å¦‚é‡åˆ°é—®é¢˜æˆ–éœ€è¦æŠ€æœ¯æ”¯æŒï¼Œè¯·ï¼š

1. æ£€æŸ¥WordPresså’ŒPHPç‰ˆæœ¬å…¼å®¹æ€§
2. ç¡®è®¤Strava APIé…ç½®æ­£ç¡®
3. éªŒè¯å›è°ƒURLé…ç½®
4. æŸ¥çœ‹WordPressé”™è¯¯æ—¥å¿—

## å¼€æºåè®®

æœ¬æ’ä»¶é‡‡ç”¨GPL v2åè®®å¼€æºã€‚

## ç‰ˆæœ¬å†å²

### v1.0.0
- åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- æ”¯æŒStravaæ•°æ®åŒæ­¥
- åœ°å›¾å’Œè¡¨æ ¼å¯è§†åŒ–
- åŸºç¡€ç»Ÿè®¡åŠŸèƒ½

---

äº«å—è·‘æ­¥ï¼Œäº«å—æ•°æ®ï¼ğŸƒâ€â™€ï¸ğŸ’¨